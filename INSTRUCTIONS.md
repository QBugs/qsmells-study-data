# Instructions to repeat and reproduce the analyses and results in the associated paper

The following sections provides step-by-step instructions to repeat and reproduce the analyses, tables, and figures reported in the associated paper.

## Run [`QSmell`](tools/qsmell/) on a quantum program and specific code smell

In the directory [`experiments/scripts/`](experiments/scripts/), run the following command as

```bash
bash run-qsmell.sh \
  --input_file_path <path, e.g., ../../subjects/data/generated/quantum-circuit-as-matrix/grover.csv or ../../tools/qiskit-terra/qiskit/algorithms/amplitude_amplifiers/grover.py> \
  --smell_metric <str, name of the smell metric to compute: CG, ROC, NC, LC, IM, IdQ, IQ, AQ, LPQ> \
  --output_file_path <path>
```

for example, to invoke [`QSmell`](tools/qsmell/) with the quantum-specific smell `IdQ` on the `shor` quantum program, run

```bash
bash run-qsmell.sh \
  --input_file_path ../../subjects/data/generated/quantum-circuit-as-matrix/shor.csv \
  --smell_metric "IdQ" \
  --output_file_path ../data/generated/qsmell-metrics/IdQ/shor/data.csv # (< 1 minute)
```

Note: Description of the `data.csv` file generated by the [`experiments/scripts/run-qsmell.sh`](experiments/scripts/run-qsmell.sh) script can be found in [`experiments/data/FILE-SPECS.md`](experiments/data/FILE-SPECS.md).

To run, all smells on all programs one might use the [`experiments/scripts/run-qsmell-on-all-subjects-all-metrics.sh`](experiments/scripts/run-qsmell-on-all-subjects-all-metrics.sh) script which basically invokes the [`experiments/scripts/run-qsmell.sh`](experiments/scripts/run-qsmell.sh) script on all programs, one at time.

### Analyze smells' data

In the directory [`experiments/statistics/`](experiments/statistics/), run the following command to create Table V in the associated paper

```bash
Rscript smell-metrics-as-table.R \
  ../data/generated/qsmell-metrics/data.csv \
  qsmell-metrics.tex # (< 1 minute)
```
